<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ Flash æ¸¸æˆ</title>
    <!-- æ ¸å¿ƒï¼šå¼•å…¥ Ruffle çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ -->
    <script src="https://cdn.jsdelivr.net/npm/@ruffle-rs/ruffle"></script>
    
    <!-- å¿…è¦çš„ CSSï¼šç¡®ä¿æ’­æ”¾å™¨å®¹å™¨å¯è§ä¸”å±…ä¸­ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: sans-serif;
            background: #f0f0f0;
            padding: 20px;
        }
        .container {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        h1 { margin-bottom: 20px; color: #333; }
        .status {
            margin: 15px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            background: #fff3cd;
            color: #856404;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        #ruffle-container {
            margin: 20px auto;
            display: inline-block;
            border: 2px solid #ddd;
            border-radius: 5px;
            overflow: hidden; /* é˜²æ­¢å†…å®¹æº¢å‡º */
        }
        .note { margin-top: 20px; color: #666; font-size: 0.9em; line-height: 1.5; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® Flash æ¸¸æˆè¿è¡Œå™¨</h1>
        <div id="status" class="status">æ­£åœ¨åˆå§‹åŒ– Ruffle æ’­æ”¾å™¨...</div>
        
        <div id="ruffle-container">
            <!-- æ ¸å¿ƒæ’­æ”¾å™¨æ ‡ç­¾ -->
            <ruffle-player id="gamePlayer" width="800" height="600">
                <!-- !!! é‡è¦ï¼šè¯·ä¿®æ”¹ä¸‹æ–¹æ–‡ä»¶åä¸ºä½ å®é™…çš„ SWF æ–‡ä»¶å !!! -->
                <a href="d1.swf"></a>
            </ruffle-player>
        </div>

        <p class="note">
            æ­¤é¡µé¢ä½¿ç”¨ Ruffle æŠ€æœ¯è¿è¡Œï¼Œæ— éœ€ Flash æ’ä»¶ã€‚<br>
            å¦‚æœæ¸¸æˆæœªæ˜¾ç¤ºï¼Œè¯·å°è¯•åˆ·æ–°é¡µé¢ï¼Œæˆ–ç¡®ä¿æ–‡ä»¶åæ­£ç¡®ã€‚
        </p>
    </div>

    <!-- å¿…è¦çš„ JavaScriptï¼šç”¨äºè¯Šæ–­å’Œæ§åˆ¶ -->
    <script>
        // è·å–é¡µé¢å…ƒç´ 
        const statusEl = document.getElementById('status');
        const playerEl = document.getElementById('gamePlayer');

        // æ ¸å¿ƒè¯Šæ–­å‡½æ•°ï¼šæ£€æŸ¥ Ruffle æ˜¯å¦æˆåŠŸæ¥ç®¡
        function checkRuffleStatus() {
            // å…³é”®åˆ¤æ–­ï¼šå¦‚æœ Ruffle æˆåŠŸè¿è¡Œï¼Œå®ƒä¼šä¸º <ruffle-player> åˆ›å»º shadowRoot
            if (playerEl && playerEl.shadowRoot) {
                statusEl.textContent = "âœ… Ruffle æ’­æ”¾å™¨å·²æˆåŠŸåŠ è½½å¹¶è¿è¡Œï¼";
                statusEl.className = "status success";
                console.log("Ruffle åˆå§‹åŒ–æˆåŠŸï¼šshadowRoot å·²å­˜åœ¨ã€‚");
            } else {
                statusEl.textContent = "âŒ Ruffle æ’­æ”¾å™¨æœªèƒ½æ­£å¸¸å¯åŠ¨ã€‚è¯·å‚è€ƒæ§åˆ¶å°é”™è¯¯ä¿¡æ¯ã€‚";
                statusEl.className = "status error";
                console.error("Ruffle åˆå§‹åŒ–å¤±è´¥ï¼šæ’­æ”¾å™¨å…ƒç´ æœªè¢«æ­£ç¡®æ¥ç®¡ã€‚");
                // å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ æ›´å¤šé«˜çº§è¯Šæ–­ï¼Œä¾‹å¦‚æ£€æŸ¥ window.RufflePlayer å¯¹è±¡
            }
        }

        // é¡µé¢åŠ è½½åï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´å†è¿›è¡Œæ£€æŸ¥ï¼ˆç»™ Ruffle åˆå§‹åŒ–ç•™å‡ºæ—¶é—´ï¼‰
        window.addEventListener('load', () => {
            // è®¾ç½®ä¸€ä¸ªè¾ƒé•¿çš„ç­‰å¾…æ—¶é—´ï¼ˆå¦‚4ç§’ï¼‰ä»¥åº”å¯¹ç½‘ç»œæˆ–æ€§èƒ½è¾ƒæ…¢çš„æƒ…å†µ
            setTimeout(checkRuffleStatus, 4000);
        });
    </script>
</body>
</html>
